:root { --bg:#0f1115; --fg:#e8e8ea; --muted:#8790a0; --accent:#7cc; }
* { box-sizing:border-box; }
body { margin:0; font-family:system-ui,Segoe UI,Roboto,Arial; background:var(--bg); color:var(--fg); height:100vh; overflow:hidden; }
.hidden { display:none; }

#join { max-width:420px; margin:6rem auto; padding:1.2rem; background:#161922; border:1px solid #222737; border-radius:14px; }
#join label { display:block; margin:0.6rem 0; }
#join input, #join select { width:100%; padding:0.6rem; background:#0f1320; color:var(--fg); border:1px solid #2a3246; border-radius:8px; }
#join button { margin-top:0.8rem; width:100%; padding:0.7rem 1rem; border:1px solid #2a3246; background:#1b2030; color:var(--fg); cursor:pointer; }
#join .hint { color:var(--muted); font-size:0.9rem; }

header { padding:0.6rem 1rem; border-bottom:1px solid #222737; display:flex; align-items:center; justify-content:space-between; gap:1rem; }
.turn { color:var(--accent); }
.controls button { margin-right:0.4rem; padding:0.4rem 0.7rem; border:1px solid #2a3246; background:#1b2030; color:var(--fg); border-radius:8px; cursor:pointer; }

main { 
  padding:0.8rem; 
  display:grid; 
  gap:1.5rem; 
  height: calc(100vh - 80px); /* Full height minus header */
  overflow: hidden;
}

.playerArea {
  height: calc(50vh - 40px); /* Each player area takes half the remaining space */
}
.playerArea h3 { margin:0 0 0.5rem 2px; color:var(--muted); font-weight:600; }

.grid3 {
  display:grid;
  grid-template-columns: 168px 154px 1fr; /* Reduced from 240px 220px to 70% */
  grid-template-rows: 1fr 1fr;
  gap: 12px;
  height: 100%;
}

.zone { 
  border:1px dashed #2a3246; 
  border-radius:10px; 
  padding:6px; 
  position:relative; 
  min-height:64px; 
  overflow: hidden;
}

.zone.big { 
  min-height:200px; 
  display:flex; 
  flex-wrap:wrap; 
  gap:10px; 
  align-content:flex-start; 
  overflow-y: auto; /* Make zones scrollable */
  overflow-x: hidden;
}

.zone.thumb { 
  background:#121726; 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  color:var(--muted); 
}
.zone.thumb .thumbCount { position:absolute; top:6px; right:8px; font-size:12px; color:#cfd6e6; background:rgba(0,0,0,0.4); padding:1px 6px; border-radius:10px; }

.stack { display:flex; flex-direction:column; gap:10px; }
.info { border:1px solid #2a3246; background:#161b2a; border-radius:10px; padding:8px; min-height:40px; display:flex; align-items:center; justify-content:center; }
.info.name { font-weight:600; }
.info.ctrls button { width:28px; height:28px; border-radius:50%; border:1px solid #2a3246; background:#1b2030; color:var(--fg); }
.spacer { height:100%; }

.card { width:140px; height:196px; background:#1f2535; border:1px solid #2a3246; border-radius:8px; position:relative; display:flex; align-items:flex-end; padding:6px; cursor:grab; user-select:none; }

/* Big zones use a CSS variable so cards fill vertically by default.
   JS sets --card-h based on zone height and the slider. */
.zone.big { --card-h: 100%; }

/* In big zones, cards use the zone-driven height and preserve the aspect ratio. */
.zone.big .card {
  height: min(var(--card-h, 100%), 100%);
  width: auto;
  aspect-ratio: 5 / 7;
  /* let the default .card styles apply for borders, radius, etc. */
}

/* Small slider styling */
.info.slider {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.info.slider .miniLabel {
  position: absolute;
  left: 10px;
  top: -10px;
  font-size: 12px;
  color: #fff;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.45);
  padding: 1px 6px;
  border-radius: 8px;
  pointer-events: none;
}

.sliderRow {
  display: flex;
  align-items: center;
  gap: 8px;
}

.sizeVal { color: var(--muted); font-size: 12px; min-width: 40px; text-align: right; }

/* optional: consistent look for range inputs */
input[type="range"] {
  width: 100%;
  accent-color: #77cccc;
}

.card .label { font-size:12px; color:#e3e6ee; }
.card.tapped { transform:rotate(90deg); transform-origin:center; }
.card.faceDown { background:#0b0e16 url('/static/assets/cardback.png') center/cover no-repeat; }
.card:active { cursor:grabbing; }
.card.hasImage { background-size:cover; background-position:center; }
.card.hasImage .label { display:none; }

.droptarget.highlight { outline:2px solid var(--accent); }

#zoom { position:fixed; inset:0; background:rgba(0,0,0,0.8); display:flex; align-items:center; justify-content:center; z-index:1000; }
#zoom.hidden { display:none; }
#zoom img { max-width: min(90vw, 720px); max-height: 90vh; border-radius:12px; }

/* mini labels for info boxes */
.info.labeled { position: relative; }
.info.labeled .miniLabel {
  position: absolute;
  left: 10px;
  top: -10px;
  font-size: 12px;
  color: #fff;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.45);
  padding: 1px 6px;
  border-radius: 8px;
  pointer-events: none;
}

/* zone labels and counts */
.zone { position: relative; }
.zone .zoneLabel {
  position: absolute;
  top: 6px; left: 8px;
  font-size: 12px;
  color: #fff;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.45);
  padding: 1px 6px;
  border-radius: 8px;
  pointer-events: none;
}
.thumb .thumbCount {
  position: absolute;
  top: 6px; right: 8px;
  font-size: 12px;
  color: #fff;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.45);
  padding: 1px 6px;
  border-radius: 8px;
  pointer-events: none;
}

/* Custom scrollbar styling for dark theme */
.zone.big::-webkit-scrollbar {
  width: 8px;
}

.zone.big::-webkit-scrollbar-track {
  background: rgba(42, 50, 70, 0.3);
  border-radius: 4px;
}

.zone.big::-webkit-scrollbar-thumb {
  background: rgba(119, 204, 204, 0.4);
  border-radius: 4px;
}

.zone.big::-webkit-scrollbar-thumb:hover {
  background: rgba(119, 204, 204, 0.6);
}

